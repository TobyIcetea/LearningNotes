# KubeEdge 相关概念（2）

## 8. 边缘 AI 之 Sedna

Sedna 是一个开源的边缘 AI 框架，它特别适合与 KubeEdge 集成，用于支持分布式的边缘 AI 应用。简单来说，Sedna 主要是帮助你在边缘设备上进行 AI 模型的训练和推理，它通过分布式协作来提高 AI 应用的效率和智能。

想象你有很多设备（比如说智能摄像头、传感器、手机等）在做一些智能任务，比如监控、识别图片或者做预测。每个设备都有计算能力，但单个设备的算力和存储有限。Sedna 就是一个帮助这些设备协作的工具，让它们一起工作，完成一个原本一个设备无法完成的任务，特别是做 AI（比如机器学习、图像识别等）。

### 8.1 Sedna 解决了什么问题？

1. 多设备一起工作

    比如你有 10 台设备，每台设备的计算能力有限，但它们可以把任务分开做——有的设备负责处理图片数据，有的设备负责做推理，还有的设备可以做一些模型的训练。Sedna 让这些设备互相配合，一起做大任务，而不是每个设备单独完成。

2. 减少云端压力

    比如你让设备把数据都发送到云端，让云端去做所有计算，这样会导致网络负担大、延迟高，甚至可能卡住。Sedna 让设备自己做一些本地计算，只有必须的数据才上传到云端。这样减少了对云端的依赖，也能加速响应时间。

3. 边缘和云合作

    有时候，边缘设备的计算不够强大，需要云端的帮助。Sedna 让设备和云端能紧密合作，设备可以先在本地做一些简单的推理，之后如果需要更复杂的计算，数据就会发送到云端，云端再返回结果给设备。这样不仅提高了效率，也能节省带宽和计算成本。

### 8.2 Sedna 的好处？

- 提高效率：多个设备一起分担任务，不用一个设备自己做所有工作。
- 节省资源：设备只在本地处理最必要的数据，减少了云端的数据传输和计算压力。
- 适应不同场景：不管设备性能如何，Sedna 都能根据设备的能力自动分配任务，让i资源用得更合理。
- 边缘和云配合：它可以把简单的任务交给边缘设备做，复杂的任务交给云端做，避免了一个地方承担过多工作。

## 9. 边缘 AI 之 Ianvs

边缘 AI（Edge AI）是指在设备端（比如手机、摄像头、传感器等）直接运行人工智能算法，而不是把数据发送到云端去处理。这样可以大大减少数据传输的时间和成本，提升反应程度，而且在没有稳定网络连接的地方也能正常运行。

Ianvs 是一个开源工具，用来测试和评估分布式协同 AI 系统的性能。具体来说，KubeEdge 这个项目帮助管理和部署边缘计算，而 Ianvs 旨在为这种分布式的 AI 系统提供标准化的基准测试，帮助开发者了解他们的系统在各种条件下的表现。

分布式协同 AI 其实就是多台设备或节点一起工作来执行 AI 任务（例如：边缘设备、云端、甚至多个地理位置的设备共同协作）。Ianvs 提供了一种统一的方式，来测试和对比这种系统的效率、准确性、响应速度等指标。

### 9.1 Ianvs 能解决什么问题？

1. 标准化测试，在分布式 AI 系统中，各种设备和节点的性能可能不同，开发者需要知道这些系统在不同配置和不同场景下的表现。Ianvs 提供了标准化的测试用例、数据集和算法，帮助开发者比较不同系统的优缺点，找出瓶颈和优化空间。
2. 基准测试工具：通过模拟（比如模拟设备之间的协同）和超参数搜索（调节 AI 模型中的关键参数），Ianvs 能帮助开发者更好地调优他们的系统，提升性能。
3. 性能评估：在多设备、多节点的环境下，AI 系统的性能很难用单一的标准来衡量。Ianvs 通过提供排行榜和测试报告，可以帮助开发者看到其他开发者的最佳实践，了解他们的解决方案在同样的测试条件下表现如何。

### 9.2 Ianvs 的好处

1. 促进创新：通过标准化的基准测试和共享最佳实践，Ianvs 可以帮助开发者快速找到优化的方向，推动分布式协同 AI 工具的发展。
2. 性能对比：开发者可以根据 Ianvs 的测试结果，对比不同方案的优劣，优化自己的系统设计。
3. 可扩展性：Ianvs 设计得很灵活，可以扩展更多的场景和应用，不仅仅局限于某一类 AI 任务。
4. 开源工具：作为开源项目，Ianvs 可以被全球的开发者共同使用和贡献，不断完善工具和性能。

### 9.3 总结

Ianvs 是一个专注于分布式协同 AI 系统的性能评估和基准测试工具。它帮助开发者通过统一的测试框架、数据集、算法和基准工具，了解他们的分布式 AI 系统在各种实际应用场景下的表现，从而快速优化、提升性能。

## 10. Device Mapper

在 KubeEdge 中，Mapper 就像是一个桥梁，或者说是翻译官。它帮助云和边缘设备之间进行沟通。你可以把 Mapper 想象成是 KubeEdge 与物理设备之间的中间人，它负责把设备的信息转换成 KubeEdge 能够理解和处理的格式，反之亦然。

具体来说，Mapper 的主要职责包括：

- 设置 / 获取设备数据：Mapper 可以直接与设备通信，读取设备的状态或设置新的参数。
- 报告设备状态：Mapper 会定期或按需向云端汇报设备的当前状态。
- 传递信息：Mapper 和 Device Twin（可以理解为设备在边缘侧的数字镜像）协同工作，确保设备的状态和控制指令能够在云端和设备之间正确地传输。

在 KubeEdge 架构中，还有两个重要的概念需要了解：

- Device Controller：位于云端，负责通过自定义资源定义（CRD）来管理和控制设备。
- Device Twin：位于边缘端，用来存储设备的状态，并且作为云端和 Mapper 之间的中介。

Mapper 是针对特定协议或类型的设备而设计的。比如，如果有一些设备使用 Modbus 协议，那么就会有一个专门的 Mapper 来管理这些使用 Modbus 协议的设备。每个 Mapper 都只专注于一种协议，但未来可能会支持在同一节点上运行多个相同协议的 Mapper，以提高效率和灵活性。

为了创建一个新的 Mapper，KubeEdge 提供了一个框架（Mapper-Framework），这使得开发者可以根据自己的需求轻松构建适用于特定设备或协议的 Mapper。这样一来，无论是工业传感器、智能家电还是其他任何类型的联网设备，都可以被集成到 KubeEdge 系统中，实现统一管理和自动化操作。

## 11. Device CRDs

KubeEdge 是一个开源系统，它扩展了 Kubernetes 的能力，使得容器化的应用程序可以在云端和边缘端（比如物联网设备）之间无缝地运行。在 KubeEdge 中，Device CRD（Custom Resource Definition，自定义资源定义）是用于管理物理设备的关键组件。

### 11.1 设备模型（Device Model）

想象一下，你有一类相似的设备，比如多个温度传感器。每个温度传感器都有相同的特性，比如测量温度的能力。为了描述这一类设备的功能特征，我们创建了一个“模板”或者说是“蓝图”，这就是所谓的设备模型。这个模型会定义这类设备能够做什么，例如它们可以报告什么类型的数值、使用哪种通信协议（比如 Modbus）、以及这些数值的范围和单位等信息。

### 11.2 设备实例（Device Instance）

现在，当你有了具体的温度传感器并向把它连接到你的 KubeEdge 系统中时，你就需要为每一个实际存在的设备创建一个“实例”。设备实例就像是用上面提到的“蓝图”来具体化一个实际的产品。你会指定这台设备的名称、它位于哪个节点（也就是哪台机器上），还有它如何与云或者其他服务通信的具体细节，比如数据上报的频率、推送方法（比如通过 MQTT 协议）以及存储方式（比如 InfluxDB 数据库）。

### 11.3 创建和使用 Device CRD

1. 定义设备模型：首先你需要根据你要管理的设备类型，在云端定义好相应的设备模型。这是通过编写一个 YAML 文件来完成的，然后通过 `kubectl apply` 命令提交给 KubeEdge 系统的。
2. 创建设备实例：接着，对于每一个你想管理的实际设备，你需要创建对应的设备实例。同样地，这也是通过编写一个 YAML 文件并使用 `kubectl apply` 来实现的。

这样，KubeEdge 就知道如何与这些设备进行交互，并能根据你设定的方式处理来自设备的数据。

总之，Device CRDs 提供了一种结构化的方式来管理和操作各种各样的物理设备，使 KubeEdge 成为一个强大的工具来支持边缘计算场景中的设备管理。

















